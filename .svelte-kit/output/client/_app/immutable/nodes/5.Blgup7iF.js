import{s as C,n as S,r as D}from"../chunks/scheduler.C9xG8wYf.js";import{S as N,i as O,e as h,s as E,c as _,a as P,b as I,g as q,d as y,f as u,h as j,j as m,k,l as w,p as z,t as U,m as B,n as M}from"../chunks/index.C0W_kJsx.js";import{g as R}from"../chunks/entry.BbGO3N1X.js";function T(o){let s,t;return{c(){s=h("div"),t=U(o[2]),this.h()},l(e){s=_(e,"DIV",{class:!0});var n=P(s);t=B(n,o[2]),n.forEach(y),this.h()},h(){u(s,"class","error-message")},m(e,n){j(e,s,n),m(s,t)},p(e,n){n&4&&M(t,e[2])},d(e){e&&y(s)}}}function V(o){let s,t,e,n,r,c,l,b="Login",g,v,p,a=o[2]&&T(o);return{c(){s=h("div"),t=h("form"),e=h("input"),n=E(),r=h("input"),c=E(),l=h("button"),l.textContent=b,g=E(),a&&a.c(),this.h()},l(i){s=_(i,"DIV",{class:!0});var f=P(s);t=_(f,"FORM",{class:!0});var d=P(t);e=_(d,"INPUT",{class:!0,type:!0,placeholder:!0}),n=I(d),r=_(d,"INPUT",{class:!0,type:!0,placeholder:!0}),c=I(d),l=_(d,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),q(l)!=="svelte-avxlee"&&(l.textContent=b),d.forEach(y),g=I(f),a&&a.l(f),f.forEach(y),this.h()},h(){u(e,"class","input"),u(e,"type","text"),u(e,"placeholder","Benutzername"),e.required=!0,u(r,"class","input"),u(r,"type","password"),u(r,"placeholder","Passwort"),r.required=!0,u(l,"class","button"),u(l,"type","submit"),u(t,"class","form"),u(s,"class","container")},m(i,f){j(i,s,f),m(s,t),m(t,e),k(e,o[0]),m(t,n),m(t,r),k(r,o[1]),m(t,c),m(t,l),m(s,g),a&&a.m(s,null),v||(p=[w(e,"input",o[5]),w(r,"input",o[6]),w(l,"keypress",o[4]),w(t,"submit",z(o[3]))],v=!0)},p(i,[f]){f&1&&e.value!==i[0]&&k(e,i[0]),f&2&&r.value!==i[1]&&k(r,i[1]),i[2]?a?a.p(i,f):(a=T(i),a.c(),a.m(s,null)):a&&(a.d(1),a=null)},i:S,o:S,d(i){i&&y(s),a&&a.d(),v=!1,D(p)}}}function A(o,s,t){let e="",n="",r="",c="";const l=async()=>{if(e&&n){const p=await fetch("/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:n})});if(p.ok)r=p.headers.get("Authorization"),r&&sessionStorage.setItem("jwt",r),sessionStorage.setItem("username",e),R("/main");else if(p.status==409){const a=await p.json();t(2,c=a.message)}else{const a=await p.json();t(2,c="Error: "+a.message)}}else t(2,c="Es fehlen Daten, um sich anzumelden")};function b(p){p.key==="Enter"&&l()}function g(){e=this.value,t(0,e)}function v(){n=this.value,t(1,n)}return[e,n,c,l,b,g,v]}class L extends N{constructor(s){super(),O(this,s,A,V,C,{})}}export{L as component};
